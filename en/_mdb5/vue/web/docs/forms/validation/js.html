<script>
  // Example starter JavaScript for disabling form submissions if there are invalid fields
  (function () {
    'use strict';

    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.querySelectorAll('.needs-validation');

    // Loop over them and prevent submission
    Array.prototype.slice.call(forms).forEach(function (form) {
      form.addEventListener(
        'submit',
        function (event) {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }

          form.classList.add('was-validated');
        },
        false
      );
    });

    const inputs = document.querySelectorAll('[data-input-event]');
    inputs.forEach((input) => {
      input.addEventListener('input', (e) => {
        const isInputValid = e.target.checkValidity();
        if (isInputValid) {
          e.target.classList.remove('is-invalid');
          e.target.classList.add('is-valid');
        } else {
          e.target.classList.remove('is-valid');
          const invalidMessage = e.target.validationMessage;
          e.target.parentNode.querySelector('.invalid-feedback').textContent = invalidMessage;
          e.target.classList.add('is-invalid');
        }
      });
    });

    const checkbox = document.querySelector('[data-checkbox-event');
    checkbox.addEventListener('change', (e) => {
      const isCheckboxValid = e.target.checkValidity();
      if (isCheckboxValid) {
        e.target.classList.remove('is-invalid');
        e.target.classList.add('is-valid');
      } else {
        e.target.classList.remove('is-valid');
        const invalidMessage = e.target.validationMessage;
        e.target.parentNode.querySelector('.invalid-feedback').textContent = invalidMessage;
        e.target.classList.add('is-invalid');
      }
    });
  })();
</script>
